events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/json;

    server {
        listen 32400;
        server_name localhost;

        # Mock Plex authentication endpoint
        location /api/v2/pins {
            add_header Content-Type application/json;
            return 200 '{"id":12345,"code":"TEST1234","authToken":"mock-plex-token-12345"}';
        }

        location /api/v2/user {
            add_header Content-Type application/json;
            return 200 '{"id":1,"username":"testuser","email":"test@example.com","thumb":"https://plex.tv/users/1234/avatar"}';
        }

        # Mock Plex server status
        location / {
            add_header Content-Type application/json;
            return 200 '{"MediaContainer":{"size":0,"allowCameraUpload":true,"allowChannelAccess":true,"allowMediaDeletion":true,"allowSharing":true,"allowSync":true,"backgroundProcessing":true,"certificate":true,"companionProxy":true,"diagnostics":"logs,databases","eventStream":true,"friendlyName":"Plex Test Server","hubSearch":true,"itemClusters":true,"livetv":2,"machineIdentifier":"test-machine-id","mediaProviders":true,"multiuser":true,"myPlex":true,"myPlexMappingState":"mapped","myPlexSigninState":"ok","myPlexSubscription":true,"myPlexUsername":"testuser","offlineTranscode":1,"ownerFeatures":"","photoAutoTag":true,"platform":"Linux","platformVersion":"5.10.0","pluginHost":true,"pushNotifications":true,"readOnlyLibraries":false,"requestParametersInCookie":true,"streamingBrainABRVersion":3,"streamingBrainVersion":2,"sync":true,"transcoderActiveVideoSessions":0,"transcoderAudio":true,"transcoderLyrics":true,"transcoderPhoto":true,"transcoderSubtitles":true,"transcoderVideo":true,"transcoderVideoBitrates":"64,96,208,320,720,1500,2000,3000,4000,8000,10000,12000,20000","transcoderVideoQualities":"0,1,2,3,4,5,6,7,8,9,10,11,12","transcoderVideoResolutions":"128,128,160,240,320,480,768,720,720,1080,1080,1080,1080","updatedAt":1704931200,"updater":true,"version":"1.32.8.7639-fb6452ebf","voiceSearch":true}}';
        }
    }
}
